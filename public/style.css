/* public/style.css */

/* Add these CSS variables at the very top of the file, after the first comment */
:root {
    /* Light theme variables */
    --bg-primary: #f4f7f6;
    --bg-secondary: #ffffff;
    --text-primary: #333;
    --text-secondary: #555;
    --border-color: #e8eeec;
    --header-color: #1a535c;
    --calendar-header-bg: #f8fafa;
    --calendar-cell-bg: #fff;
    --calendar-assignment-bg: #eef6f8; /* Background for assignment days */
    --input-border-color: #ced4da;
    --input-bg-color: #fff;
    --button-default-bg: #f0f0f0;
    --button-default-border: #ccc;
    --button-default-text: #444; /* Added for default button text */
    --button-hover-bg: #e8eeec;
    --button-primary-bg: #2a9d8f;
    --button-primary-hover-bg: #268d80;
    --button-primary-text: #ffffff;
    --button-warn-bg: #ffc107;
    --button-warn-border: #f5b700;
    --button-warn-text: #333;
    --button-warn-hover-bg: #e0a800;
    --button-danger-bg: #dc3545;
    --button-danger-border: #dc3545;
    --button-danger-text: #ffffff;
    --button-danger-hover-bg: #c82333;
    --delete-icon-color: #ff6b6b;
    --delete-icon-hover-color: #c94040;
    --delete-icon-hover-bg: #ffeeee;
    --link-color: #17a2b8; /* Color for position name in calendar */
    --other-month-text: #adb5bd;
    --other-month-bg: var(--calendar-header-bg); /* Use header bg for consistency */
    --skipped-text: var(--button-danger-bg);
    --list-item-border: var(--border-color); /* Slightly lighter than main border */
    --list-bg: #fdfdfd; /* Keep list slightly off-white in light mode */
    --focus-ring-color: rgba(13, 110, 253, .25);
    /* --- ADDED: Today/Past Variables --- */
    --today-border: #ffc107; /* A gold/yellow border for today */
    --today-bg: #fffbeb; /* A very light yellow background for today */
    --past-day-opacity: 0.65; /* Opacity for past days */
    --past-day-text: #6c757d; /* Greyed text for past days */
}

/* Dark theme variables */
[data-theme="dark"] {
    --bg-primary: #1a1a1a;
    --bg-secondary: #2d2d2d;
    --text-primary: #e0e0e0;
    --text-secondary: #b0b0b0;
    --border-color: #404040;
    --header-color: #4fd1c5;
    --calendar-header-bg: #333333;
    --calendar-cell-bg: #2d2d2d;
    --calendar-assignment-bg: #363636;
    --input-border-color: #555;
    --input-bg-color: #333;
    --button-default-bg: #444;
    --button-default-border: #666;
    --button-default-text: var(--text-primary);
    --button-hover-bg: #555;
    --button-primary-bg: #2a9d8f; /* Keep primary color */
    --button-primary-hover-bg: #36bdb0;
    --button-primary-text: #000; /* Dark text on lighter teal */
    --button-warn-bg: #ffc107; /* Keep warning color */
    --button-warn-border: #f5b700;
    --button-warn-text: #333;
    --button-warn-hover-bg: #e0a800;
    --button-danger-bg: #dc3545; /* Keep danger color */
    --button-danger-border: #dc3545;
    --button-danger-text: #ffffff;
    --button-danger-hover-bg: #c82333;
    --delete-icon-color: #ff8a8a;
    --delete-icon-hover-color: #ff6b6b;
    --delete-icon-hover-bg: #553333;
    --link-color: #4fd1c5; /* Changed from #20c997 to match header */
    --other-month-text: #777;
    --other-month-bg: #252525;
    --skipped-text: var(--delete-icon-color);
    --list-item-border: #444;
    --list-bg: #333;
    --focus-ring-color: rgba(79, 209, 197, .25); /* Theme focus ring */
    /* --- ADDED: Today/Past Variables (Dark) --- */
    --today-border: #e0a800; /* A slightly darker gold border */
    --today-bg: #4d442a; /* A subtle dark gold background */
    --past-day-opacity: 0.5; /* Slightly more faded in dark mode */
    --past-day-text: #888; /* Lighter grey text for past days */
}

/* --- Global & Base Styles --- */
html, body { height: 100%; margin: 0; padding: 0; box-sizing: border-box; }
*, *:before, *:after { box-sizing: inherit; }

body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    display: flex;
    background-color: var(--bg-primary);
    color: var(--text-primary);
    transition: background-color 0.3s ease, color 0.3s ease; /* Smooth theme transition */
}

#scheduler {
    display: flex;
    gap: 25px;
    padding: 20px;
    background-color: var(--bg-secondary);
    width: 100%;
    min-height: 100%;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    transition: background-color 0.3s ease;
}

/* --- Admin Sidebar (#team-management) --- */
#team-management {
    flex: 0 1 300px;
    min-width: 260px;
    max-width: 400px;
    display: flex;
    flex-direction: column;
    border-right: 1px solid var(--border-color);
    padding-right: 25px;
    transition: border-color 0.3s ease;
}

#team-management h3, #unavailability-section h4, #position-management-section h4, #override-days-section h4, #user-management-section h4 { /* Added user management */
    margin-top: 0;
    color: var(--header-color);
    padding-bottom: 10px;
    margin-bottom: 15px;
    font-weight: 600;
    transition: color 0.3s ease;
}

#team-management h3 {
    border-bottom: 2px solid var(--border-color); /* Use border-color */
    transition: border-color 0.3s ease;
}

#unavailability-section h4, #position-management-section h4, #override-days-section h4, #user-management-section h4 { /* Added user management */
    font-size: 1.1em;
}

#team-input-area {
    margin-bottom: 15px;
    display: flex;
    flex-wrap: wrap; /* Allow wrapping */
    gap: 8px; /* Add gap */
}

#team-input-area input[type="text"],
#team-input-area input[type="tel"] { /* Apply to both */
    flex: 1 1 100px;
    min-width: 100px;
    /* margin-right removed, use gap */
}
#team-input-area button {
    flex-shrink: 0;
}

#team-list, #unavailable-list, #position-list, #override-days-list {
    list-style: none;
    padding: 0;
    margin: 0;
    overflow-y: auto;
    border: 1px solid var(--border-color);
    border-radius: 4px;
    padding: 8px;
    background-color: var(--list-bg); /* Use list background variable */
    transition: background-color 0.3s ease, border-color 0.3s ease;
}

#team-list { flex-grow: 1; min-height: 150px; }
#unavailable-list, #position-list, #override-days-list { max-height: 150px; min-height: 50px; margin-top: 10px; font-size: 0.9em; }

#team-list li.team-member-item { /* Target specific class */
    padding: 10px 12px;
    border-bottom: 1px solid var(--list-item-border);
    font-size: 0.95em;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: flex-start; /* Align top */
    gap: 10px;
    color: var(--text-primary);
    transition: border-color 0.3s ease, color 0.3s ease;
}

/* <<< ADDED: Styles for member info/actions/edit sections >>> */
.member-info {
    display: flex;
    flex-direction: column;
    gap: 2px;
    flex-grow: 1;
    min-width: 120px;
}
.member-name { font-weight: bold; }
.member-phone { font-size: 0.9em; color: var(--text-secondary); transition: color 0.3s ease; }
.member-actions { display: flex; gap: 5px; align-items: center; flex-shrink: 0; }
.member-actions button { padding: 3px 8px; font-size: 0.85em; }
.member-actions .delete-member-btn { background: none; border: none; color: var(--delete-icon-color); font-size: 1.1em; padding: 0 5px; line-height: 1; }
.member-actions .delete-member-btn:hover { color: var(--delete-icon-hover-color); background-color: var(--delete-icon-hover-bg); }

.member-positions {
    display: flex;
    flex-wrap: wrap;
    gap: 5px 8px;
    padding-left: 0; /* Adjust as needed */
    font-size: 0.9em;
    width: 100%;
    margin-top: 5px;
    border-top: 1px dashed var(--list-item-border);
    padding-top: 8px;
}

.position-checkbox {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 2px 6px;
    background-color: var(--calendar-assignment-bg);
    border-radius: 4px;
    cursor: pointer;
    border: 1px solid var(--border-color); /* Add border */
}
[data-theme="dark"] .position-checkbox {
     background-color: var(--input-bg-color); /* Darker background */
}
.position-checkbox input[type="checkbox"] {
    margin: 0;
    width: 14px; /* Adjust size */
    height: 14px;
}

/* Delete buttons in lists */
#team-list button, #unavailable-list button, #position-list button, #override-days-list button {
    background: none;
    border: none;
    color: var(--delete-icon-color);
    cursor: pointer;
    font-size: 1.1em;
    padding: 0 5px;
    line-height: 1;
    border-radius: 3px;
    transition: background-color 0.2s ease, color 0.2s ease;
}
#unavailable-list button, #override-days-list button { font-size: 1em; padding: 0 3px; }

#team-list button:hover, #unavailable-list button:hover, #position-list button:hover, #override-days-list button:hover {
    color: var(--delete-icon-hover-color);
    background-color: var(--delete-icon-hover-bg);
}

/* Sidebar Sections Separators */
#unavailability-section, #position-management-section, #override-days-section, #user-management-section { /* Added user management */
    margin-top: 25px;
    padding-top: 15px;
    border-top: 2px solid var(--border-color); /* Use border-color */
    transition: border-color 0.3s ease;
}

#unavailability-input-area { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 10px; }
#unavailability-input-area label { font-size: 0.9em; color: var(--text-secondary); margin-bottom: 3px; display: block; transition: color 0.3s ease; }
#unavailability-input-area > div { flex: 1; min-width: 120px; }

#unavailability-input-area input[type="date"], #unavailability-input-area select {
    /* Styling handled by general input rules below */
    width: 100%;
    padding: 6px 8px; /* Slightly smaller padding */
    font-size: 0.95em;
}

#unavailability-input-area button, #override-day-input-area button {
    align-self: flex-end;
    flex-grow: 0;
}

/* --- User Management Section Styles --- */
#user-management-section {
    /* Spacing/border handled by common rule above */
}

#user-input-area {
    display: flex;
    flex-direction: column; /* Stack fields vertically */
    gap: 10px;
    margin-bottom: 15px;
}

#user-input-area .form-group {
     margin-bottom: 5px; /* Reduce gap between label/input */
}

#user-input-area label {
    font-size: 0.9em;
    color: var(--text-secondary);
    margin-bottom: 3px;
    display: block;
    transition: color 0.3s ease;
}

/* Inputs already styled globally */

#addUserBtn {
    margin-top: 5px; /* Space above button */
    align-self: flex-start; /* Align button left */
    /* Styling inherited from primary button style */
}

.feedback-message {
    margin-top: 10px;
    font-size: 0.9em;
    min-height: 1em; /* Prevent layout shift */
    transition: color 0.3s ease;
}
.feedback-message.success { color: var(--button-primary-bg); } /* Use appropriate variable */
.feedback-message.error { color: var(--button-danger-bg); } /* Use appropriate variable */


/* --- Calendar View --- */
#calendar-view { flex: 1 1 auto; display: flex; flex-direction: column; min-width: 0; }

#calendar-header {
    display: flex;
    justify-content: space-between; /* Adjust as needed with new button */
    align-items: center;
    margin-bottom: 20px;
    flex-wrap: wrap;
    gap: 10px;
    padding: 0 5px;
}

#calendar-nav-buttons { display: flex; gap: 5px; order: 1; } /* Keep first */

#calendar-header h2 {
    margin: 0;
    font-size: 1.6em;
    color: var(--header-color);
    font-weight: 600;
    order: 2; /* Month/Year second */
    text-align: center;
    flex-grow: 1;
    min-width: 150px;
    transition: color 0.3s ease;
}

/* Buttons in Calendar Header (General Styling via 'button' selector below) */
#randomizeBtn { order: 3; background-color: var(--button-warn-bg); border-color: var(--button-warn-border); color: var(--button-warn-text); }
#randomizeBtn:hover { background-color: var(--button-warn-hover-bg); }

#logoutBtn { order: 4; background-color: var(--button-danger-bg); border-color: var(--button-danger-border); color: var(--button-danger-text); margin-left: auto; /* Push to right side before theme toggle */ }
#logoutBtn:hover { background-color: var(--button-danger-hover-bg); }

/* Default nav buttons */
#calendar-nav-buttons button { background-color: var(--button-default-bg); border-color: var(--button-default-border); color: var(--text-primary); }
#calendar-nav-buttons button:hover { background-color: var(--button-hover-bg); }


/* --- Theme Toggle Button (POSITIONING IN HEADER) --- */
#theme-toggle {
    order: 5; /* Place it last in the header flex flow */
    margin-left: 10px; /* Space from logout button */
    background-color: var(--button-default-bg); /* Match other default buttons */
    border-color: var(--button-default-border);
    color: var(--text-primary);
    padding: 7px 12px; /* Match other header buttons */
    border-radius: 5px;
    cursor: pointer;
    /* Removed: position, top, right, z-index */
    transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease;
}
#theme-toggle:hover {
    background-color: var(--button-hover-bg);
}

/* --- Calendar Table --- */
#calendar {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed;
    flex-grow: 1;
}

#calendar th {
    border: 1px solid var(--border-color);
    padding: 10px 5px;
    text-align: center;
    background-color: var(--calendar-header-bg);
    font-weight: 600;
    font-size: 0.9em;
    color: var(--text-primary); /* Use themed text color */
    transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
}

#calendar td {
    border: 1px solid var(--border-color);
    padding: 6px 8px;
    vertical-align: top;
    height: 110px;
    background-color: var(--calendar-cell-bg);
    text-align: left;
    position: relative;
    font-size: 0.9em;
    overflow: hidden;
    transition: background-color 0.3s ease, border-color 0.3s ease, opacity 0.3s ease; /* Added opacity transition */
    padding-bottom: 25px; /* Add padding at bottom for hold checkbox */
    min-height: 120px; /* Ensure minimum height for content */
}

#calendar td.other-month {
    color: var(--other-month-text);
    background-color: var(--other-month-bg);
    opacity: 1 !important; /* Ensure past/today styles don't apply to other-month cells */
}

#calendar td.weekend { /* Optional styling if needed */ }

#calendar td.assignment-day {
    background-color: var(--calendar-assignment-bg);
}

/* --- ADDED: Today Styling --- */
#calendar td.today {
    background-color: var(--today-bg);
    border: 1px solid var(--today-border); /* Add border for emphasis */
    /* Make content slightly more prominent */
    /* opacity: 1 !important; */ /* Usually not needed unless overridden */
}
/* Ensure date number is visible */
#calendar td.today .date-number {
    font-weight: bold;
    color: var(--text-primary); /* Use primary text color for today's date */
}

/* --- ADDED: Past Day Styling --- */
#calendar td.past-day {
    opacity: var(--past-day-opacity);
    /* Optional: Slightly different background if needed, but opacity often suffices */
    /* background-color: var(--bg-secondary); */
}
/* Grey out text content within past days */
#calendar td.past-day .date-number,
#calendar td.past-day .assigned-position,
#calendar td.past-day .assignment-skipped,
#calendar td.past-day .hold-label {
    color: var(--past-day-text) !important; /* Override default colors */
}
/* Make links less prominent */
#calendar td.past-day .assigned-position strong {
    color: var(--past-day-text) !important;
    font-weight: normal; /* Optional: reduce emphasis */
}
/* Hide interactive elements on past days */
#calendar td.past-day .hold-container .hold-checkbox,
#calendar td.past-day .hold-container .small-randomize-btn {
    display: none; /* Hide hold checkbox and randomize button */
}
#calendar td.past-day .hold-container .hold-label {
    cursor: default; /* Remove pointer cursor */
}

.date-number {
    display: block;
    position: absolute;
    top: 4px;
    right: 6px;
    font-weight: 600;
    font-size: 0.85em;
    color: var(--text-secondary);
    background-color: rgba(255, 255, 255, 0.0); /* Make transparent, rely on text color */
    padding: 1px 3px;
    border-radius: 2px;
    transition: color 0.3s ease;
}
[data-theme="dark"] .date-number {
     background-color: rgba(0, 0, 0, 0.0); /* Ensure transparent in dark */
}


.assigned-position {
    font-size: 0.85em;
    color: var(--text-primary); /* Use themed text color */
    display: block;
    margin-top: 4px;
    line-height: 1.45;
    padding-left: 2px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    transition: color 0.3s ease;
}
.assigned-position:first-of-type { margin-top: 22px; } /* Back to original value */

.assigned-position strong {
    color: var(--link-color); /* Use link color for position name */
    min-width: 45px;
    display: inline-block;
    margin-right: 5px;
    transition: color 0.3s ease;
}

.assignment-skipped {
    font-size: 0.8em;
    color: var(--skipped-text); /* Use variable for skipped text */
    font-style: italic;
    padding-left: 2px;
    margin-top: 4px;
    transition: color 0.3s ease;
}

/* --- General Buttons & Inputs --- */
button {
    padding: 7px 14px;
    cursor: pointer;
    border: 1px solid var(--button-default-border);
    background-color: var(--button-default-bg);
    color: var(--button-default-text);
    border-radius: 5px;
    transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease;
    font-size: 0.9em;
}
button:hover {
     background-color: var(--button-hover-bg);
}

/* Primary 'Add' buttons */
#addMemberBtn, #addUnavailabilityBtn, #addPositionBtn, #addOverrideDayBtn, #addUserBtn { /* Added addUserBtn */
    background-color: var(--button-primary-bg);
    color: var(--button-primary-text);
    border: none; /* Primary buttons might not need a border */
    font-weight: 500;
}
#addMemberBtn:hover, #addUnavailabilityBtn:hover, #addPositionBtn:hover, #addOverrideDayBtn:hover, #addUserBtn:hover { /* Added addUserBtn hover */
    background-color: var(--button-primary-hover-bg);
}

/* Inputs and Selects */
input[type="text"], input[type="password"], input[type="date"], select {
    padding: 7px 10px;
    border: 1px solid var(--input-border-color);
    background-color: var(--input-bg-color);
    color: var(--text-primary);
    border-radius: 5px;
    font-size: 0.95em;
    width: 100%; /* Default to full width */
    transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease, box-shadow 0.2s ease;
}

/* Specific width adjustments */
#team-input-area input[type="text"], #position-input-area input[type="text"], #override-day-input-area input[type="date"] {
    width: auto; /* Allow shrinking in flex container */
}
#unavailability-input-area select {
    padding: 6px 8px; /* Match date input padding */
}

input:focus, select:focus {
    outline: none;
    border-color: var(--link-color); /* Use link color for focus border */
    box-shadow: 0 0 0 0.2rem var(--focus-ring-color); /* Use themed focus ring */
}


/* --- Responsive Adjustments --- */
@media (max-width: 800px) {
    body { 
        display: block; 
        padding: 0;
        margin: 0;
    }
    
    #scheduler { 
        flex-direction: column; 
        height: auto; 
        min-height: 100%; 
        padding: 10px; 
        gap: 15px; 
    }
    
    #team-management { 
        flex-basis: auto; 
        flex-shrink: 0; 
        min-width: unset; 
        max-width: 100%; 
        border-right: none; 
        padding-right: 0; 
        border-bottom: 1px solid var(--border-color); 
        padding-bottom: 15px; 
    }

    /* Improve form inputs on mobile */
    input[type="text"], 
    input[type="password"], 
    input[type="date"], 
    select {
        font-size: 16px; /* Prevent iOS zoom on focus */
        padding: 8px 10px;
    }

    /* Adjust button sizes for touch */
    button {
        padding: 8px 12px;
        min-height: 44px; /* Better touch targets */
        font-size: 16px;
    }

    /* Calendar adjustments */
    #calendar {
        font-size: 14px;
        width: 100%;
        overflow-x: auto;
    }

    #calendar td {
        min-height: 80px;
        padding: 4px;
        font-size: 12px;
    }

    #calendar th {
        padding: 8px 4px;
        font-size: 12px;
    }

    .date-number {
        font-size: 12px;
        top: 2px;
        right: 4px;
    }

    .assigned-position {
        font-size: 11px;
        margin-top: 2px;
        line-height: 1.3;
    }

    .assigned-position strong {
        min-width: 35px;
    }

    /* Improve header layout */
    #calendar-header {
        flex-wrap: wrap;
        gap: 8px;
        padding: 0;
        margin-bottom: 15px;
    }

    #calendar-header h2 {
        width: 100%;
        font-size: 1.3em;
        margin: 5px 0;
    }

    #calendar-nav-buttons {
        gap: 4px;
    }

    /* Improve list views */
    #team-list, 
    #unavailable-list, 
    #position-list, 
    #override-days-list {
        max-height: 150px;
        font-size: 14px;
    }

    /* Improve form sections spacing */
    .form-group {
        margin-bottom: 15px;
    }

    /* Position management improvements */
    .position-config {
        margin-left: 5px;
    }

    .allowed-days-group {
        gap: 8px;
        padding-left: 10px;
    }

    .allowed-days-group label {
        min-width: 60px;
    }

    /* Member positions display */
    .member-positions {
        flex-wrap: wrap;
        gap: 6px;
        padding-left: 10px;
    }

    .position-checkbox {
        padding: 4px;
        font-size: 12px;
    }

    /* Hold container adjustments */
    .hold-container {
        bottom: 2px;
        left: 4px;
        font-size: 10px;
    }

    .hold-checkbox {
        width: 12px;
        height: 12px;
    }

    .small-randomize-btn {
        padding: 2px;
    }

    /* Improve feedback messages */
    .feedback-message {
        font-size: 14px;
        padding: 8px;
    }
}

/* Extra small devices */
@media (max-width: 480px) {
    #scheduler {
        padding: 5px;
    }

    /* Further reduce sizes */
    #calendar td {
        min-height: 70px;
        padding: 2px;
        font-size: 11px;
    }

    .assigned-position {
        font-size: 10px;
        margin-top: 1px;
    }

    /* Stack header buttons */
    #calendar-header {
        justify-content: center;
    }

    #calendar-header button {
        font-size: 14px;
        padding: 6px 10px;
    }

    /* Improve form layouts */
    #unavailability-input-area,
    #special-assignment-input-area {
        flex-direction: column;
        gap: 8px;
    }

    #unavailability-input-area > div,
    #special-assignment-input-area > div {
        width: 100%;
    }

    /* Adjust position management */
    .position-actions {
        flex-wrap: wrap;
        gap: 4px;
    }

    /* Make sure buttons are easy to tap */
    button {
        min-width: 44px;
    }

    /* Hide the regular calendar table */
    #calendar {
        display: none;
    }

    /* Show the mobile calendar list view */
    #calendar-body-mobile {
        display: block !important; /* Show on mobile */
        list-style: none;
        padding: 0;
        margin: 0;
    }

    /* --- RENAMED and STYLED mobile list item --- */
    .mobile-day-item { /* Renamed from .mobile-day */
        background: var(--calendar-cell-bg);
        border: 1px solid var(--border-color);
        margin-bottom: 8px;
        border-radius: 4px;
        overflow: hidden;
        transition: background-color 0.3s ease, border-color 0.3s ease, opacity 0.3s ease; /* Added opacity */
    }

    .mobile-day-header {
        background: var(--calendar-header-bg);
        padding: 8px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid var(--border-color);
    }

    .mobile-date { /* Renamed from .mobile-day-header span */
        font-weight: bold;
        color: var(--text-primary);
    }

    .mobile-day-content {
        padding: 8px;
    }

    /* --- ADDED: Today Styling (Mobile) --- */
    .mobile-day-item.today {
        background-color: var(--today-bg);
        border: 1px solid var(--today-border);
    }
    .mobile-day-item.today .mobile-date {
        color: var(--text-primary); /* Ensure date is prominent */
    }

    /* --- ADDED: Past Day Styling (Mobile) --- */
    .mobile-day-item.past-day {
        opacity: var(--past-day-opacity);
    }
    .mobile-day-item.past-day .mobile-date,
    .mobile-day-item.past-day .assigned-position,
    .mobile-day-item.past-day .assignment-skipped {
         color: var(--past-day-text) !important;
    }
    .mobile-day-item.past-day .assigned-position strong {
        color: var(--past-day-text) !important;
        font-weight: normal;
    }
    /* Hide hold elements on past mobile days */
    .mobile-day-item.past-day .hold-container {
        display: none;
    }


    .mobile-day-item.weekend { /* Renamed from .mobile-day.weekend */
        /* Optional: Adjust weekend styling if needed */
        /* background: var(--calendar-assignment-bg); */ /* Maybe remove this if today/past is enough */
    }
    .mobile-day-item.assignment-day { /* Added class for consistency */
         /* Optional: Add specific background for assignment days if not weekend/today */
    }

    /* Adjust assignment display for mobile */
    .mobile-day-item .assigned-position { /* Renamed from .mobile-day */
        font-size: 14px;
        margin: 4px 0;
        white-space: normal;
        line-height: 1.4;
    }

    .mobile-day-item .hold-container { /* Renamed from .mobile-day */
        position: static;
        margin-top: 8px;
        padding-top: 8px;
        border-top: 1px solid var(--border-color);
        font-size: 12px;
    }

    /* Hide the small randomize button on mobile days */
    .mobile-day-item .small-randomize-btn { /* Renamed from .mobile-day */
        display: none;
    }
}

/* Landscape mode adjustments */
@media (max-width: 800px) and (orientation: landscape) {
    #scheduler {
        flex-direction: row;
        gap: 10px;
    }

    #team-management {
        width: 40%;
        border-right: 1px solid var(--border-color);
        border-bottom: none;
        padding-right: 10px;
        padding-bottom: 0;
    }

    #calendar-view {
        width: 60%;
    }
}

/* --- Login Page Styles (Now using variables) --- */
body.login-page { /* Add this class to body tag in login.html if you want specific body styles */
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    background-color: var(--bg-primary); /* Use variable */
}

#login-container {
    background: var(--bg-secondary); /* Use variable */
    color: var(--text-primary); /* Use variable */
    padding: 30px 40px;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    width: 100%;
    max-width: 400px;
    text-align: center;
    border: 1px solid var(--border-color); /* Add subtle border */
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}

#login-container h2 {
    margin-bottom: 25px;
    color: var(--header-color); /* Use variable */
    transition: color 0.3s ease;
}

.form-group { margin-bottom: 20px; text-align: left; }

.form-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: 500;
    color: var(--text-secondary); /* Use variable */
    transition: color 0.3s ease;
}

/* Use general input styling from above */
/* .form-group input { ... } */

#login-button {
    width: 100%;
    padding: 12px;
    background-color: var(--button-primary-bg); /* Use variable */
    color: var(--button-primary-text); /* Use variable */
    border: none;
    border-radius: 4px;
    font-size: 1.1em;
    cursor: pointer;
    transition: background-color 0.2s ease, color 0.2s ease;
}
#login-button:hover {
    background-color: var(--button-primary-hover-bg); /* Use variable */
}

#error-message {
    color: var(--button-danger-bg); /* Use variable */
    margin-top: 15px;
    min-height: 1em;
    font-size: 0.9em;
    transition: color 0.3s ease;
}

.login-note {
    font-size: 0.8em;
    color: var(--text-secondary); /* Use variable */
    margin-top: 20px;
    transition: color 0.3s ease;
}

/* Place theme toggle nicely on login page (since no header) */
body.login-page #theme-toggle {
    position: absolute; /* Position relative to body */
    top: 20px;
    right: 20px;
    /* Inherits basic button styles, ensure it looks okay */
}

.team-member-item {
    padding: 10px;
    border-bottom: 1px solid var(--border-color);
}

.member-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
    width: 100%;
}

.member-positions {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    padding-left: 15px;
    font-size: 0.9em;
}

.position-checkbox {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 2px 6px;
    background-color: var(--calendar-assignment-bg);
    border-radius: 4px;
    cursor: pointer;
}

.position-checkbox input[type="checkbox"] {
    margin: 0;
}

/* Update the hold container styles */
.hold-container {
    position: absolute;
    bottom: 4px;
    left: 6px;
    display: flex;
    align-items: center;
    gap: 2px;
    font-size: 0.8em;
    z-index: 1;
    background-color: var(--calendar-cell-bg);
    padding: 2px 4px;
}

.hold-checkbox {
    width: 14px;
    height: 14px;
    cursor: pointer;
}

.hold-label {
    color: var(--text-secondary);
    cursor: pointer;
    user-select: none;
}

/* Adjust the date-number positioning to not conflict */
.date-number {
    right: 6px; /* Keep right-aligned */
}

/* Remove the top margin adjustment for first assignment since hold is now at bottom */
.assigned-position:first-of-type {
    margin-top: 22px; /* Back to original value */
}

/* Add margin to last assignment to prevent overlap with hold checkbox */
.assigned-position:last-of-type,
.assignment-skipped:last-of-type {
    margin-bottom: 20px;
}

/* Add styles for the new buttons */
#saveHoldsBtn {
    background-color: var(--button-warn-bg);
    color: var(--button-warn-text);
    border-color: var(--button-warn-border);
}

#saveHoldsBtn:hover {
    background-color: var(--button-warn-hover-bg);
}

#clearHoldsBtn {
    background-color: var(--button-default-bg);
    color: var(--button-default-text);
    border-color: var(--button-default-border);
}

#clearHoldsBtn:hover {
    background-color: var(--button-hover-bg);
}

/* Add styles for the small randomize button */
.small-randomize-btn {
    background: none;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 0 4px;
    font-size: 1em;
    display: flex;
    align-items: center;
    opacity: 0.7;
    transition: opacity 0.2s ease;
}

.small-randomize-btn:hover {
    opacity: 1;
    background: none;
}

/* --- ADDED: Held Assignment Styling --- */
#calendar td .assigned-position.held,
#calendar-body-mobile .assigned-position.held {
    font-style: italic;
    opacity: 0.85; /* Slightly faded */
    /* Optional: Add a subtle background or border */
    /* background-color: rgba(255, 215, 0, 0.1); */ /* Light gold hint */
}
[data-theme="dark"] #calendar td .assigned-position.held,
[data-theme="dark"] #calendar-body-mobile .assigned-position.held {
     /* background-color: rgba(224, 168, 0, 0.15); */ /* Darker gold hint */
}

/* Ensure hold checkbox is visible */
.hold-container {
    /* Styles already exist, ensure z-index if needed */
     z-index: 2;
}

/* Adjust assignment positioning if hold container overlaps */
#calendar td {
    /* padding-bottom: 25px; */ /* Ensure enough space at bottom */
}
.assigned-position:last-of-type,
.assignment-skipped:last-of-type {
    /* margin-bottom: 20px; */ /* Ensure space above hold container */
}

/* Style the small randomize button */
.small-randomize-btn {
    /* Styles already exist */
    margin-left: 4px; /* Add some space from label */
}

/* Style skipped text */
.skipped-text {
    color: var(--skipped-text);
    font-style: italic;
    font-size: 0.9em;
}

/* Responsive adjustments for team list */
@media (max-width: 800px) {
    #team-list li.team-member-item {
        flex-direction: column;
        align-items: stretch;
        gap: 8px;
    }
    .member-info { flex-direction: row; justify-content: space-between; align-items: center; min-width: unset; }
    .member-actions { justify-content: flex-end; }
    .member-positions { padding-top: 5px; margin-top: 5px; }
    .edit-member-form { flex-direction: column; }
    .edit-member-form button { align-self: flex-end; }
}

/* <<< ADDED: Edit Form Styles >>> */
.edit-member-form {
    width: 100%; display: flex; flex-wrap: wrap; gap: 8px;
    padding: 10px; margin-top: 8px; background-color: var(--calendar-header-bg);
    border-radius: 4px; border: 1px solid var(--border-color);
    transition: background-color 0.3s ease, border-color 0.3s ease;
}
.edit-member-form input[type="text"],
.edit-member-form input[type="tel"] { flex: 1 1 120px; padding: 5px 8px; font-size: 0.9em; }
.edit-member-form button { padding: 4px 10px; font-size: 0.9em; flex-shrink: 0; }
.edit-member-form .save-member-btn { background-color: var(--button-primary-bg); color: var(--button-primary-text); border: none; }
.edit-member-form .save-member-btn:hover { background-color: var(--button-primary-hover-bg); }
.edit-member-form .cancel-edit-member-btn { background-color: var(--button-default-bg); color: var(--button-default-text); border-color: var(--button-default-border); }
.edit-member-form .cancel-edit-member-btn:hover { background-color: var(--button-hover-bg); }
